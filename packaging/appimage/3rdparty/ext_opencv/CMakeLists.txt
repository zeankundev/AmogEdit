# The OpenCV contrib repo external project
ExternalProject_Add(
  ext_opencv_contrib
  DOWNLOAD_DIR ${EXT_DOWNLOAD_DIR}
  URL https://github.com/opencv/opencv_contrib/archive/4.3.0.tar.gz
  URL_MD5 924ed270a66b5234442cf84da8c7e4b1

  # This is a support repository for OpenCV 4.x and does not contain any
  # build or install rules. This will be hooked into OpenCV which will control
  # those steps.
  CONFIGURE_COMMAND ""
  BUILD_COMMAND ""
  INSTALL_COMMAND ""
)

# The OpenCV external project
ExternalProject_Add(
  ext_opencv
  DOWNLOAD_DIR ${EXT_DOWNLOAD_DIR}
  URL https://github.com/opencv/opencv/archive/4.3.0.tar.gz
  URL_MD5 559953ef6ffaad03421cbba7f31d891c
  CMAKE_ARGS ${CMAKE_GLOBAL_PROFILE} -DOPENCV_EXTRA_MODULES_PATH=${EXT_BUILD_DIR}/deps-build/ext_opencv/ext_opencv_contrib-prefix/src/ext_opencv_contrib/modules -DOPENCV_GENERATE_PKGCONFIG=ON -DBUILD_LIST=core,objdetect,imgproc,imgcodecs,flann,tracking -DBUILD_opencv_freetype=OFF -DBUILD_EXAMPLES=OFF -DBUILD_TESTS=OFF -DBUILD_DOCS=OFF -DBUILD_PERF_TESTS=OFF -DINSTALL_C_EXAMPLES=OFF -DINSTALL_PYTHON_EXAMPLES=OFF -DWITH_LAPACK=OFF -DWITH_V4L=OFF -DOPENCV_ENABLE_ALLOCATOR_STATS=OFF -DOPENCV_BUILD_3RDPARTY_LIBS=OFF -DBUILD_NEW_PYTHON_SUPPORT=OFF -DBUILD_ZLIB=OFF -DWITH_JASPER=OFF -DWITH_PNG=OFF -DWITH_OPENEXR=OFF -DWITH_1394=OFF -DWITH_CUBLAS=OFF -DWITH_CUDA=OFF -DWITH_CUFFT=OFF -DWITH_DIRECTX=OFF -DWITH_DSHOW=OFF -DWITH_EIGEN=OFF -DWITH_FFMPEG=OFF -DWITH_GPHOTO2=OFF -DWITH_GSTREAMER=OFF -DWITH_GTK=OFF -DWITH_IMGCODEC_HDR=OFF -DWITH_IMGCODEC_PXM=OFF -DWITH_IMGCODEC_SUNRASTER=OFF -DWITH_IPP=OFF -DWITH_JPEG=OFF -DWITH_MATLAB=OFF -DWITH_NVCUVID=OFF -DWITH_OPENCL_SVM=OFF -DWITH_OPENCL=OFF -DWITH_OPENCLAMDBLAS=OFF -DWITH_OPENCLAMDFFT=OFF -DWITH_OPENMP=OFF -DWITH_OPENNI=OFF -DWITH_PVAPI=OFF -DWITH_QT_OPENGL=OFF -DWITH_QT=OFF -DWITH_QUICKTIME=OFF -DWITH_TBB=OFF -DWITH_TIFF=OFF -DWITH_UNICAP=OFF -DWITH_VA_INTEL=OFF -DWITH_VFW=OFF -DWITH_VIDEOINPUT=OFF -DWITH_VTK=OFF -DWITH_WEBP=OFF -DWITH_WIN32UI=OFF -DWITH_XINE=OFF -DCPU_BASELINE=SSE2 -DCPU_DISPATCH=SSE2
  DEPENDS ext_opencv_contrib
)
